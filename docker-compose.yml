version: '3.7'


x-logging:
  &default-logging
  driver: "json-file"
  options:
    max-size: "10m"
    max-file: "3"

services:
  fragmentation-producer:
    image: redpencil/fragmentation-producer:0.1.2
    environment:
      FOLDER_DEPTH: 1
      PAGE_RESOURCES_COUNT: 10
      LDES_STREAM_PREFIX: 'http://mu.semte.ch/streams/'
      TIME_TREE_RELATION_PATH: 'http://www.w3.org/ns/prov#generatedAtTime'
      CACHE_SIZE: 10
      DATA_FOLDER: '/data'
      DOMAIN_NAME: 'http://localhost:3000/'
      ENABLE_AUTH: false
    volumes:
      - './data/:/data/'
    ports:
      - 3000:3000
  ipdc-ldes-consumer:
    image: lblod/ipdc-ldes-consumer-service:0.1.2
    environment:
      CRON_PATTERN: '0 * * * * *'
      LDES_ENDPOINT_VIEW: 'http://fragmentation-producer:3000/test/1'
      DATA_FOLDER: '/data'
    volumes:
      - './consumer-state/:/data/'
